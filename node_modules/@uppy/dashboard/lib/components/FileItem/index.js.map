{"version":3,"names":["h","Component","classNames","shallowEqual","FilePreviewAndLink","FileProgress","FileInfo","Buttons","FileItem","componentDidMount","file","props","preview","handleRequestThumbnail","shouldComponentUpdate","nextProps","componentDidUpdate","componentWillUnmount","handleCancelThumbnail","render","isProcessing","progress","preprocess","postprocess","isUploaded","uploadComplete","error","uploadInProgressOrComplete","uploadStarted","uploadInProgress","isGhost","showRemoveButton","individualCancellation","showRemoveButtonAfterComplete","dashboardItemClass","recoveredState","resumableUploads","className","id","role","showLinkToFileUploadResult","i18n","toggleFileCard","metaFields","uppy","hideRetryButton","hideCancelButton","hidePauseResumeButton","acquirers","containerWidth","containerHeight","toggleAddFilesPanel","isSingleFile","canEditFile","openFileEditor"],"sources":["index.jsx"],"sourcesContent":["import {  h, Component  } from 'preact'\nimport classNames from 'classnames'\nimport shallowEqual from 'is-shallow-equal'\nimport FilePreviewAndLink from './FilePreviewAndLink/index.jsx'\nimport FileProgress from './FileProgress/index.jsx'\nimport FileInfo from './FileInfo/index.jsx'\nimport Buttons from './Buttons/index.jsx'\n\nexport default class FileItem extends Component {\n  componentDidMount () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  shouldComponentUpdate (nextProps) {\n    return !shallowEqual(this.props, nextProps)\n  }\n\n  // VirtualList mounts FileItems again and they emit `thumbnail:request`\n  // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n  componentDidUpdate () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  componentWillUnmount () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleCancelThumbnail(file)\n    }\n  }\n\n  render () {\n    const { file } = this.props\n\n    const isProcessing = file.progress.preprocess || file.progress.postprocess\n    const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error\n    const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing\n    const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) || isProcessing\n    const error = file.error || false\n\n    // File that Golden Retriever was able to partly restore (only meta, not blob),\n    // users still need to re-add it, so itâ€™s a ghost\n    const { isGhost } = file\n\n    let showRemoveButton = this.props.individualCancellation\n      ? !isUploaded\n      : !uploadInProgress && !isUploaded\n\n    if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n      showRemoveButton = true\n    }\n\n    const dashboardItemClass = classNames({\n      'uppy-Dashboard-Item': true,\n      'is-inprogress': uploadInProgress && !this.props.recoveredState,\n      'is-processing': isProcessing,\n      'is-complete': isUploaded,\n      'is-error': !!error,\n      'is-resumable': this.props.resumableUploads,\n      'is-noIndividualCancellation': !this.props.individualCancellation,\n      'is-ghost': isGhost,\n    })\n\n    return (\n      <div\n        className={dashboardItemClass}\n        id={`uppy_${file.id}`}\n        role={this.props.role}\n      >\n        <div className=\"uppy-Dashboard-Item-preview\">\n          <FilePreviewAndLink\n            file={file}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            i18n={this.props.i18n}\n            toggleFileCard={this.props.toggleFileCard}\n            metaFields={this.props.metaFields}\n          />\n          <FileProgress\n            uppy={this.props.uppy}\n            file={file}\n            error={error}\n            isUploaded={isUploaded}\n            hideRetryButton={this.props.hideRetryButton}\n            hideCancelButton={this.props.hideCancelButton}\n            hidePauseResumeButton={this.props.hidePauseResumeButton}\n            recoveredState={this.props.recoveredState}\n            showRemoveButtonAfterComplete={this.props.showRemoveButtonAfterComplete}\n            resumableUploads={this.props.resumableUploads}\n            individualCancellation={this.props.individualCancellation}\n            i18n={this.props.i18n}\n          />\n        </div>\n\n        <div className=\"uppy-Dashboard-Item-fileInfoAndButtons\">\n          <FileInfo\n            file={file}\n            id={this.props.id}\n            acquirers={this.props.acquirers}\n            containerWidth={this.props.containerWidth}\n            containerHeight={this.props.containerHeight}\n            i18n={this.props.i18n}\n            toggleAddFilesPanel={this.props.toggleAddFilesPanel}\n            toggleFileCard={this.props.toggleFileCard}\n            metaFields={this.props.metaFields}\n            isSingleFile={this.props.isSingleFile}\n          />\n          <Buttons\n            file={file}\n            metaFields={this.props.metaFields}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            showRemoveButton={showRemoveButton}\n            canEditFile={this.props.canEditFile}\n            uploadInProgressOrComplete={uploadInProgressOrComplete}\n            toggleFileCard={this.props.toggleFileCard}\n            openFileEditor={this.props.openFileEditor}\n            uppy={this.props.uppy}\n            i18n={this.props.i18n}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n"],"mappings":"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"}