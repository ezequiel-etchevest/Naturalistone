{"version":3,"names":["createElement","h","Component","PropTypes","DashboardPlugin","cssSize","locale","metaFields","plugins","uppy","uppyPropType","getHTMLProps","nonHtmlPropsHaveChanged","DashboardModal","componentDidMount","installPlugin","componentDidUpdate","prevProps","open","onRequestClose","props","uninstallPlugin","options","onRequestCloseModal","plugin","setOptions","closeModal","openModal","componentWillUnmount","id","target","closeModalOnClickOutside","disablePageScrollWhenModalOpen","inline","width","height","showProgressDetails","note","proudlyDisplayPoweredByUppy","autoOpenFileEditor","animateOpenClose","browserBackButtonClose","closeAfterFinish","disableStatusBar","disableInformer","disableThumbnailGenerator","disableLocalFiles","disabled","hideCancelButton","hidePauseResumeButton","hideProgressAfterFinish","hideRetryButton","hideUploadButton","showLinkToFileUploadResult","showRemoveButtonAfterComplete","showSelectedFiles","waitForThumbnailsBeforeUpload","fileManagerSelectionType","theme","thumbnailType","thumbnailWidth","container","use","getPlugin","removePlugin","render","className","ref","propTypes","isRequired","window","instanceOf","HTMLElement","any","bool","func","string","number","defaultProps","undefined"],"sources":["DashboardModal.js"],"sourcesContent":["import { createElement as h, Component } from 'react'\nimport PropTypes from 'prop-types'\nimport DashboardPlugin from '@uppy/dashboard'\nimport { cssSize, locale, metaFields, plugins, uppy as uppyPropType } from './propTypes.js'\nimport getHTMLProps from './getHTMLProps.js'\nimport nonHtmlPropsHaveChanged from './nonHtmlPropsHaveChanged.js'\n\n/**\n * React Component that renders a Dashboard for an Uppy instance in a Modal\n * dialog. Visibility of the Modal is toggled using the `open` prop.\n */\n\nclass DashboardModal extends Component {\n  componentDidMount () {\n    this.installPlugin()\n  }\n\n  componentDidUpdate (prevProps) {\n    const { uppy, open, onRequestClose } = this.props\n    if (prevProps.uppy !== uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    } else if (nonHtmlPropsHaveChanged(this.props, prevProps)) {\n      const options = { ...this.props, onRequestCloseModal: onRequestClose }\n      delete options.uppy\n      this.plugin.setOptions(options)\n    }\n    if (prevProps.open && !open) {\n      this.plugin.closeModal()\n    } else if (!prevProps.open && open) {\n      this.plugin.openModal()\n    }\n  }\n\n  componentWillUnmount () {\n    this.uninstallPlugin()\n  }\n\n  installPlugin () {\n    const {\n      id = 'react:DashboardModal',\n      uppy,\n      target,\n      open,\n      onRequestClose,\n      closeModalOnClickOutside,\n      disablePageScrollWhenModalOpen,\n      inline,\n      plugins, // eslint-disable-line no-shadow\n      width,\n      height,\n      showProgressDetails,\n      note,\n      metaFields, // eslint-disable-line no-shadow\n      proudlyDisplayPoweredByUppy,\n      autoOpenFileEditor,\n      animateOpenClose,\n      browserBackButtonClose,\n      closeAfterFinish,\n      disableStatusBar,\n      disableInformer,\n      disableThumbnailGenerator,\n      disableLocalFiles,\n      disabled,\n      hideCancelButton,\n      hidePauseResumeButton,\n      hideProgressAfterFinish,\n      hideRetryButton,\n      hideUploadButton,\n      showLinkToFileUploadResult,\n      showRemoveButtonAfterComplete,\n      showSelectedFiles,\n      waitForThumbnailsBeforeUpload,\n      fileManagerSelectionType,\n      theme,\n      thumbnailType,\n      thumbnailWidth,\n      locale, // eslint-disable-line no-shadow\n    } = this.props\n    const options = {\n      id,\n      target,\n      closeModalOnClickOutside,\n      disablePageScrollWhenModalOpen,\n      inline,\n      plugins,\n      width,\n      height,\n      showProgressDetails,\n      note,\n      metaFields,\n      proudlyDisplayPoweredByUppy,\n      autoOpenFileEditor,\n      animateOpenClose,\n      browserBackButtonClose,\n      closeAfterFinish,\n      disableStatusBar,\n      disableInformer,\n      disableThumbnailGenerator,\n      disableLocalFiles,\n      disabled,\n      hideCancelButton,\n      hidePauseResumeButton,\n      hideProgressAfterFinish,\n      hideRetryButton,\n      hideUploadButton,\n      showLinkToFileUploadResult,\n      showRemoveButtonAfterComplete,\n      showSelectedFiles,\n      waitForThumbnailsBeforeUpload,\n      fileManagerSelectionType,\n      theme,\n      thumbnailType,\n      thumbnailWidth,\n      locale,\n      onRequestCloseModal: onRequestClose,\n    }\n\n    if (!options.target) {\n      options.target = this.container\n    }\n\n    delete options.uppy\n    uppy.use(DashboardPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)\n    if (open) {\n      this.plugin.openModal()\n    }\n  }\n\n  uninstallPlugin (props = this.props) {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  render () {\n    return h('div', {\n      className: 'uppy-Container',\n      ref: (container) => {\n        this.container = container\n      },\n      ...getHTMLProps(this.props),\n    })\n  }\n}\n\nDashboardModal.propTypes = {\n  uppy: uppyPropType.isRequired,\n  target: typeof window !== 'undefined' ? PropTypes.instanceOf(window.HTMLElement) : PropTypes.any,\n  open: PropTypes.bool,\n  onRequestClose: PropTypes.func,\n  closeModalOnClickOutside: PropTypes.bool,\n  disablePageScrollWhenModalOpen: PropTypes.bool,\n  inline: PropTypes.bool,\n  plugins,\n  width: cssSize,\n  height: cssSize,\n  showProgressDetails: PropTypes.bool,\n  note: PropTypes.string,\n  metaFields,\n  proudlyDisplayPoweredByUppy: PropTypes.bool,\n  autoOpenFileEditor: PropTypes.bool,\n  animateOpenClose: PropTypes.bool,\n  browserBackButtonClose: PropTypes.bool,\n  closeAfterFinish: PropTypes.bool,\n  disableStatusBar: PropTypes.bool,\n  disableInformer: PropTypes.bool,\n  disableThumbnailGenerator: PropTypes.bool,\n  disableLocalFiles: PropTypes.bool,\n  disabled: PropTypes.bool,\n  hideCancelButton: PropTypes.bool,\n  hidePauseResumeButton: PropTypes.bool,\n  hideProgressAfterFinish: PropTypes.bool,\n  hideRetryButton: PropTypes.bool,\n  hideUploadButton: PropTypes.bool,\n  showLinkToFileUploadResult: PropTypes.bool,\n  showRemoveButtonAfterComplete: PropTypes.bool,\n  showSelectedFiles: PropTypes.bool,\n  waitForThumbnailsBeforeUpload: PropTypes.bool,\n  fileManagerSelectionType: PropTypes.string,\n  theme: PropTypes.string,\n  // pass-through to ThumbnailGenerator\n  thumbnailType: PropTypes.string,\n  thumbnailWidth: PropTypes.number,\n  locale,\n}\n// Must be kept in sync with @uppy/dashboard/src/Dashboard.jsx.\nDashboardModal.defaultProps = {\n  metaFields: [],\n  plugins: [],\n  inline: false,\n  width: 750,\n  height: 550,\n  thumbnailWidth: 280,\n  thumbnailType: 'image/jpeg',\n  waitForThumbnailsBeforeUpload: false,\n  showLinkToFileUploadResult: false,\n  showProgressDetails: false,\n  hideUploadButton: false,\n  hideCancelButton: false,\n  hideRetryButton: false,\n  hidePauseResumeButton: false,\n  hideProgressAfterFinish: false,\n  note: null,\n  closeModalOnClickOutside: false,\n  closeAfterFinish: false,\n  disableStatusBar: false,\n  disableInformer: false,\n  disableThumbnailGenerator: false,\n  disablePageScrollWhenModalOpen: true,\n  animateOpenClose: true,\n  fileManagerSelectionType: 'files',\n  proudlyDisplayPoweredByUppy: true,\n  showSelectedFiles: true,\n  showRemoveButtonAfterComplete: false,\n  browserBackButtonClose: false,\n  theme: 'light',\n  autoOpenFileEditor: false,\n  disabled: false,\n  disableLocalFiles: false,\n\n  // extra\n  open: undefined,\n  target: undefined,\n  locale: null,\n  onRequestClose: undefined,\n}\n\nexport default DashboardModal\n"],"mappings":"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"}