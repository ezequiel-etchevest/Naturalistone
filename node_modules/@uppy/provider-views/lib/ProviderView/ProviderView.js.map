{"version":3,"names":["h","PQueue","getSafeFileId","AuthView","Header","Browser","LoaderView","CloseWrapper","View","packageJson","formatBreadcrumbs","breadcrumbs","slice","map","directory","name","join","prependPath","path","component","defaultPickerIcon","focusable","width","height","viewBox","d","_abortController","_classPrivateFieldLooseKey","_withAbort","_list","_listFilesAndFolders","_recursivelyListAllFiles","ProviderView","constructor","plugin","opts","Object","defineProperty","value","_recursivelyListAllFiles2","_listFilesAndFolders2","_list2","_withAbort2","writable","defaultOptions","viewType","showTitles","showFilter","showBreadcrumbs","loadAllFiles","filterQuery","bind","clearFilter","getFolder","getNextFolder","logout","handleAuth","handleScroll","donePicking","render","setPluginState","authenticated","files","folders","filterInput","isSearchVisible","currentSelection","tearDown","requestPath","setLoading","_classPrivateFieldLooseBase","signal","lastCheckbox","undefined","getPluginState","index","findIndex","dir","nextPagePath","newFiles","newFolders","concat","uppy","i18n","numFiles","length","err","handleError","folder","res","provider","ok","revoked","message","title","url","manual_revoke_url","info","newState","input","clientVersion","VERSION","login","uppyVersions","preFirstRender","e","log","event","shouldHandleScroll","isHandlingScroll","combinedFiles","combinedFolders","error","messages","selectedItem","withRelDirPath","newItem","relDirPath","absDirPath","replace","isFolder","isEmpty","numNewFiles","queue","concurrency","onFiles","newFile","tagFile","getTagFile","id","checkIfFileAlreadyExists","push","onIdle","smart_count","addFiles","file","forEach","clearSelection","state","viewOptions","_this","didFirstRender","targetViewOptions","loading","isChecked","toggleCheckbox","recordShiftKeyPress","filterItems","hasInput","pluginIcon","icon","headerProps","username","browserProps","showSearchFilter","search","clearSearch","searchTerm","searchOnInput","searchInputLabel","clearSearchLabel","noResultsLabel","done","cancel","cancelPicking","headerComponent","uppyFiles","getFiles","validateRestrictions","arguments","onUnmount","pluginName","i18nArray","op","_classPrivateFieldLoo","abort","abortController","AbortController","cancelRequest","on","off","_ref","items","list","item","_ref2","_ref3","curPath","filter","promises","add","Promise","all","version"],"sources":["ProviderView.jsx"],"sourcesContent":["import { h } from 'preact'\n// eslint-disable-next-line import/no-unresolved\nimport PQueue from 'p-queue'\n\nimport { getSafeFileId } from '@uppy/utils/lib/generateFileID'\n\nimport AuthView from './AuthView.jsx'\nimport Header from './Header.jsx'\nimport Browser from '../Browser.jsx'\nimport LoaderView from '../Loader.jsx'\nimport CloseWrapper from '../CloseWrapper.js'\nimport View from '../View.js'\n\nimport packageJson from '../../package.json'\n\nfunction formatBreadcrumbs (breadcrumbs) {\n  return breadcrumbs.slice(1).map((directory) => directory.name).join('/')\n}\n\nfunction prependPath (path, component) {\n  if (!path) return component\n  return `${path}/${component}`\n}\n\nexport function defaultPickerIcon () {\n  return (\n    <svg aria-hidden=\"true\" focusable=\"false\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\">\n      <path d=\"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z\" />\n    </svg>\n  )\n}\n\n/**\n * Class to easily generate generic views for Provider plugins\n */\nexport default class ProviderView extends View {\n  static VERSION = packageJson.version\n\n  /**\n   * @param {object} plugin instance of the plugin\n   * @param {object} opts\n   */\n  constructor (plugin, opts) {\n    super(plugin, opts)\n    // set default options\n    const defaultOptions = {\n      viewType: 'list',\n      showTitles: true,\n      showFilter: true,\n      showBreadcrumbs: true,\n      loadAllFiles: false,\n    }\n\n    // merge default options with the ones set by user\n    this.opts = { ...defaultOptions, ...opts }\n\n    // Logic\n    this.filterQuery = this.filterQuery.bind(this)\n    this.clearFilter = this.clearFilter.bind(this)\n    this.getFolder = this.getFolder.bind(this)\n    this.getNextFolder = this.getNextFolder.bind(this)\n    this.logout = this.logout.bind(this)\n    this.handleAuth = this.handleAuth.bind(this)\n    this.handleScroll = this.handleScroll.bind(this)\n    this.donePicking = this.donePicking.bind(this)\n\n    // Visual\n    this.render = this.render.bind(this)\n\n    // Set default state for the plugin\n    this.plugin.setPluginState({\n      authenticated: false,\n      files: [],\n      folders: [],\n      breadcrumbs: [],\n      filterInput: '',\n      isSearchVisible: false,\n      currentSelection: [],\n    })\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  tearDown () {\n    // Nothing.\n  }\n\n  #abortController\n\n  async #withAbort (op) {\n    // prevent multiple requests in parallel from causing race conditions\n    this.#abortController?.abort()\n    const abortController = new AbortController()\n    this.#abortController = abortController\n    const cancelRequest = () => {\n      abortController.abort()\n      this.clearSelection()\n    }\n    try {\n      this.plugin.uppy.on('dashboard:close-panel', cancelRequest)\n      this.plugin.uppy.on('cancel-all', cancelRequest)\n\n      await op(abortController.signal)\n    } finally {\n      this.plugin.uppy.off('dashboard:close-panel', cancelRequest)\n      this.plugin.uppy.off('cancel-all', cancelRequest)\n      this.#abortController = undefined\n    }\n  }\n\n  async #list ({ requestPath, absDirPath, signal }) {\n    const { username, nextPagePath, items } = await this.provider.list(requestPath, { signal })\n    this.username = username || this.username\n\n    return {\n      items: items.map((item) => ({\n        ...item,\n        absDirPath,\n      })),\n      nextPagePath,\n    }\n  }\n\n  async #listFilesAndFolders ({ breadcrumbs, signal }) {\n    const absDirPath = formatBreadcrumbs(breadcrumbs)\n\n    const { items, nextPagePath } = await this.#list({ requestPath: this.nextPagePath, absDirPath, signal })\n\n    this.nextPagePath = nextPagePath\n\n    const files = []\n    const folders = []\n\n    items.forEach((item) => {\n      if (item.isFolder) {\n        folders.push(item)\n      } else {\n        files.push(item)\n      }\n    })\n\n    return { files, folders }\n  }\n\n  /**\n   * Select a folder based on its id: fetches the folder and then updates state with its contents\n   * TODO rename to something better like selectFolder or navigateToFolder (breaking change?)\n   *\n   * @param  {string} requestPath\n   * the path we need to use when sending list request to companion (for some providers it's different from ID)\n   * @param  {string} name used in the UI and to build the absDirPath\n   * @returns {Promise}   Folders/files in folder\n   */\n  async getFolder (requestPath, name) {\n    this.setLoading(true)\n    try {\n      await this.#withAbort(async (signal) => {\n        this.lastCheckbox = undefined\n\n        let { breadcrumbs } = this.plugin.getPluginState()\n\n        const index = breadcrumbs.findIndex((dir) => requestPath === dir.requestPath)\n\n        if (index !== -1) {\n          // means we navigated back to a known directory (already in the stack), so cut the stack off there\n          breadcrumbs = breadcrumbs.slice(0, index + 1)\n        } else {\n          // we have navigated into a new (unknown) folder, add it to the stack\n          breadcrumbs = [...breadcrumbs, { requestPath, name }]\n        }\n\n        this.nextPagePath = requestPath\n        let files = []\n        let folders = []\n        do {\n          const { files: newFiles, folders: newFolders } = await this.#listFilesAndFolders({\n            breadcrumbs, signal,\n          })\n\n          files = files.concat(newFiles)\n          folders = folders.concat(newFolders)\n\n          this.setLoading(this.plugin.uppy.i18n('loadedXFiles', { numFiles: files.length + folders.length }))\n        } while (\n          this.opts.loadAllFiles && this.nextPagePath\n        )\n\n        this.plugin.setPluginState({ folders, files, breadcrumbs, filterInput: '' })\n      })\n    } catch (err) {\n      this.handleError(err)\n    } finally {\n      this.setLoading(false)\n    }\n  }\n\n  /**\n   * Fetches new folder\n   *\n   * @param  {object} folder\n   */\n  getNextFolder (folder) {\n    this.getFolder(folder.requestPath, folder.name)\n    this.lastCheckbox = undefined\n  }\n\n  /**\n   * Removes session token on client side.\n   */\n  async logout () {\n    try {\n      await this.#withAbort(async (signal) => {\n        const res = await this.provider.logout({ signal })\n        if (res.ok) {\n          if (!res.revoked) {\n            const message = this.plugin.uppy.i18n('companionUnauthorizeHint', {\n              provider: this.plugin.title,\n              url: res.manual_revoke_url,\n            })\n            this.plugin.uppy.info(message, 'info', 7000)\n          }\n\n          const newState = {\n            authenticated: false,\n            files: [],\n            folders: [],\n            breadcrumbs: [],\n            filterInput: '',\n          }\n          this.plugin.setPluginState(newState)\n        }\n      })\n    } catch (err) {\n      this.handleError(err)\n    }\n  }\n\n  filterQuery (input) {\n    this.plugin.setPluginState({ filterInput: input })\n  }\n\n  clearFilter () {\n    this.plugin.setPluginState({ filterInput: '' })\n  }\n\n  async handleAuth () {\n    const clientVersion = `@uppy/provider-views=${ProviderView.VERSION}`\n    try {\n      await this.provider.login({ uppyVersions: clientVersion })\n      this.plugin.setPluginState({ authenticated: true })\n      this.preFirstRender()\n    } catch (e) {\n      this.plugin.uppy.log(`login failed: ${e.message}`)\n    }\n  }\n\n  async handleScroll (event) {\n    if (this.shouldHandleScroll(event) && this.nextPagePath) {\n      this.isHandlingScroll = true\n\n      try {\n        await this.#withAbort(async (signal) => {\n          const { files, folders, breadcrumbs } = this.plugin.getPluginState()\n\n          const { files: newFiles, folders: newFolders } = await this.#listFilesAndFolders({\n            breadcrumbs, signal,\n          })\n\n          const combinedFiles = files.concat(newFiles)\n          const combinedFolders = folders.concat(newFolders)\n\n          this.plugin.setPluginState({ folders: combinedFolders, files: combinedFiles })\n        })\n      } catch (error) {\n        this.handleError(error)\n      } finally {\n        this.isHandlingScroll = false\n      }\n    }\n  }\n\n  async #recursivelyListAllFiles ({ requestPath, absDirPath, relDirPath, queue, onFiles, signal }) {\n    let curPath = requestPath\n\n    while (curPath) {\n      const res = await this.#list({ requestPath: curPath, absDirPath, signal })\n      curPath = res.nextPagePath\n\n      const files = res.items.filter((item) => !item.isFolder)\n      const folders = res.items.filter((item) => item.isFolder)\n\n      onFiles(files)\n\n      // recursively queue call to self for each folder\n      const promises = folders.map(async (folder) => queue.add(async () => (\n        this.#recursivelyListAllFiles({\n          requestPath: folder.requestPath,\n          absDirPath: prependPath(absDirPath, folder.name),\n          relDirPath: prependPath(relDirPath, folder.name),\n          queue,\n          onFiles,\n          signal,\n        })\n      )))\n      await Promise.all(promises) // in case we get an error\n    }\n  }\n\n  async donePicking () {\n    this.setLoading(true)\n    try {\n      await this.#withAbort(async (signal) => {\n        const { currentSelection } = this.plugin.getPluginState()\n\n        const messages = []\n        const newFiles = []\n\n        for (const selectedItem of currentSelection) {\n          const { requestPath } = selectedItem\n\n          const withRelDirPath = (newItem) => ({\n            ...newItem,\n            // calculate the file's path relative to the user's selected item's path\n            // see https://github.com/transloadit/uppy/pull/4537#issuecomment-1614236655\n            relDirPath: newItem.absDirPath.replace(selectedItem.absDirPath, '').replace(/^\\//, ''),\n          })\n\n          if (selectedItem.isFolder) {\n            let isEmpty = true\n            let numNewFiles = 0\n\n            const queue = new PQueue({ concurrency: 6 })\n\n            const onFiles = (files) => {\n              for (const newFile of files) {\n                const tagFile = this.getTagFile(newFile)\n                const id = getSafeFileId(tagFile)\n                // If the same folder is added again, we don't want to send\n                // X amount of duplicate file notifications, we want to say\n                // the folder was already added. This checks if all files are duplicate,\n                // if that's the case, we don't add the files.\n                if (!this.plugin.uppy.checkIfFileAlreadyExists(id)) {\n                  newFiles.push(withRelDirPath(newFile))\n                  numNewFiles++\n                  this.setLoading(this.plugin.uppy.i18n('addedNumFiles', { numFiles: numNewFiles }))\n                }\n                isEmpty = false\n              }\n            }\n\n            await this.#recursivelyListAllFiles({\n              requestPath,\n              absDirPath: prependPath(selectedItem.absDirPath, selectedItem.name),\n              relDirPath: selectedItem.name,\n              queue,\n              onFiles,\n              signal,\n            })\n            await queue.onIdle()\n\n            let message\n            if (isEmpty) {\n              message = this.plugin.uppy.i18n('emptyFolderAdded')\n            } else if (numNewFiles === 0) {\n              message = this.plugin.uppy.i18n('folderAlreadyAdded', {\n                folder: selectedItem.name,\n              })\n            } else {\n              // TODO we don't really know at this point whether any files were actually added\n              // (only later after addFiles has been called) so we should probably rewrite this.\n              // Example: If all files fail to add due to restriction error, it will still say \"Added 100 files from folder\"\n              message = this.plugin.uppy.i18n('folderAdded', {\n                smart_count: numNewFiles, folder: selectedItem.name,\n              })\n            }\n\n            messages.push(message)\n          } else {\n            newFiles.push(withRelDirPath(selectedItem))\n          }\n        }\n\n        // Note: this.plugin.uppy.addFiles must be only run once we are done fetching all files,\n        // because it will cause the loading screen to disappear,\n        // and that will allow the user to start the upload, so we need to make sure we have\n        // finished all async operations before we add any file\n        // see https://github.com/transloadit/uppy/pull/4384\n        this.plugin.uppy.log('Adding remote provider files')\n        this.plugin.uppy.addFiles(newFiles.map((file) => this.getTagFile(file)))\n\n        this.plugin.setPluginState({ filterInput: '' })\n        messages.forEach(message => this.plugin.uppy.info(message))\n\n        this.clearSelection()\n      })\n    } catch (err) {\n      this.handleError(err)\n    } finally {\n      this.setLoading(false)\n    }\n  }\n\n  render (state, viewOptions = {}) {\n    const { authenticated, didFirstRender } = this.plugin.getPluginState()\n    const { i18n } = this.plugin.uppy\n\n    if (!didFirstRender) {\n      this.preFirstRender()\n    }\n\n    const targetViewOptions = { ...this.opts, ...viewOptions }\n    const { files, folders, filterInput, loading, currentSelection } = this.plugin.getPluginState()\n    const { isChecked, toggleCheckbox, recordShiftKeyPress, filterItems } = this\n    const hasInput = filterInput !== ''\n    const pluginIcon = this.plugin.icon || defaultPickerIcon\n\n    const headerProps = {\n      showBreadcrumbs: targetViewOptions.showBreadcrumbs,\n      getFolder: this.getFolder,\n      breadcrumbs: this.plugin.getPluginState().breadcrumbs,\n      pluginIcon,\n      title: this.plugin.title,\n      logout: this.logout,\n      username: this.username,\n      i18n,\n    }\n\n    const browserProps = {\n      isChecked,\n      toggleCheckbox,\n      recordShiftKeyPress,\n      currentSelection,\n      files: hasInput ? filterItems(files) : files,\n      folders: hasInput ? filterItems(folders) : folders,\n      username: this.username,\n      getNextFolder: this.getNextFolder,\n      getFolder: this.getFolder,\n      loadAllFiles: this.opts.loadAllFiles,\n\n      // For SearchFilterInput component\n      showSearchFilter: targetViewOptions.showFilter,\n      search: this.filterQuery,\n      clearSearch: this.clearFilter,\n      searchTerm: filterInput,\n      searchOnInput: true,\n      searchInputLabel: i18n('filter'),\n      clearSearchLabel: i18n('resetFilter'),\n\n      noResultsLabel: i18n('noFilesFound'),\n      logout: this.logout,\n      handleScroll: this.handleScroll,\n      done: this.donePicking,\n      cancel: this.cancelPicking,\n      headerComponent: Header(headerProps),\n      title: this.plugin.title,\n      viewType: targetViewOptions.viewType,\n      showTitles: targetViewOptions.showTitles,\n      showBreadcrumbs: targetViewOptions.showBreadcrumbs,\n      pluginIcon,\n      i18n: this.plugin.uppy.i18n,\n      uppyFiles: this.plugin.uppy.getFiles(),\n      validateRestrictions: (...args) => this.plugin.uppy.validateRestrictions(...args),\n    }\n\n    if (loading) {\n      return (\n        <CloseWrapper onUnmount={this.clearSelection}>\n          <LoaderView i18n={this.plugin.uppy.i18n} loading={loading} />\n        </CloseWrapper>\n      )\n    }\n\n    if (!authenticated) {\n      return (\n        <CloseWrapper onUnmount={this.clearSelection}>\n          <AuthView\n            pluginName={this.plugin.title}\n            pluginIcon={pluginIcon}\n            handleAuth={this.handleAuth}\n            i18n={this.plugin.uppy.i18n}\n            i18nArray={this.plugin.uppy.i18nArray}\n          />\n        </CloseWrapper>\n      )\n    }\n\n    return (\n      <CloseWrapper onUnmount={this.clearSelection}>\n        {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n        <Browser {...browserProps} />\n      </CloseWrapper>\n    )\n  }\n}\n"],"mappings":"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"}