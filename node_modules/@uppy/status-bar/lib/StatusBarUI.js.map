{"version":3,"names":["h","classNames","statusBarStates","calculateProcessingProgress","UploadBtn","RetryBtn","CancelBtn","PauseResumeButton","DoneBtn","ProgressBarProcessing","ProgressBarError","ProgressBarUploading","ProgressBarComplete","STATE_ERROR","STATE_WAITING","STATE_PREPROCESSING","STATE_UPLOADING","STATE_POSTPROCESSING","STATE_COMPLETE","StatusBar","props","newFiles","allowNewUpload","isUploadInProgress","isAllPaused","resumableUploads","error","hideUploadButton","hidePauseResumeButton","hideCancelButton","hideRetryButton","recoveredState","uploadState","totalProgress","files","supportsUploadProgress","hideAfterFinish","isSomeGhost","doneButtonHandler","isUploadStarted","i18n","startUpload","uppy","isAllComplete","showProgressDetails","numUploads","complete","totalSize","totalETA","totalUploadedSize","getProgressValue","progress","mode","value","getIsIndeterminate","getIsHidden","progressValue","isHidden","width","showUploadBtn","showCancelBtn","showPauseResumeBtn","showRetryBtn","showDoneBtn","progressClassNames","statusBarClassNames","className","style","role"],"sources":["StatusBarUI.jsx"],"sourcesContent":["import { h } from 'preact'\nimport classNames from 'classnames'\nimport statusBarStates from './StatusBarStates.js'\nimport calculateProcessingProgress from './calculateProcessingProgress.js'\n\nimport {\n  UploadBtn,\n  RetryBtn,\n  CancelBtn,\n  PauseResumeButton,\n  DoneBtn,\n  ProgressBarProcessing,\n  ProgressBarError,\n  ProgressBarUploading,\n  ProgressBarComplete,\n} from './Components.jsx'\n\nconst {\n  STATE_ERROR,\n  STATE_WAITING,\n  STATE_PREPROCESSING,\n  STATE_UPLOADING,\n  STATE_POSTPROCESSING,\n  STATE_COMPLETE,\n} = statusBarStates\n\n// TODO: rename the function to StatusBarUI on the next major.\nexport default function StatusBar (props) {\n  const {\n    newFiles,\n    allowNewUpload,\n    isUploadInProgress,\n    isAllPaused,\n    resumableUploads,\n    error,\n    hideUploadButton,\n    hidePauseResumeButton,\n    hideCancelButton,\n    hideRetryButton,\n    recoveredState,\n    uploadState,\n    totalProgress,\n    files,\n    supportsUploadProgress,\n    hideAfterFinish,\n    isSomeGhost,\n    doneButtonHandler,\n    isUploadStarted,\n    i18n,\n    startUpload,\n    uppy,\n    isAllComplete,\n    showProgressDetails,\n    numUploads,\n    complete,\n    totalSize,\n    totalETA,\n    totalUploadedSize,\n  } = props\n\n  function getProgressValue () {\n    switch (uploadState) {\n      case STATE_POSTPROCESSING:\n      case STATE_PREPROCESSING: {\n        const progress = calculateProcessingProgress(files)\n\n        if (progress.mode === 'determinate') {\n          return progress.value * 100\n        }\n        return totalProgress\n      }\n      case STATE_ERROR: {\n        return null\n      }\n      case STATE_UPLOADING: {\n        if (!supportsUploadProgress) {\n          return null\n        }\n        return totalProgress\n      }\n      default:\n        return totalProgress\n    }\n  }\n\n  function getIsIndeterminate () {\n    switch (uploadState) {\n      case STATE_POSTPROCESSING:\n      case STATE_PREPROCESSING: {\n        const { mode } = calculateProcessingProgress(files)\n        return mode === 'indeterminate'\n      }\n      case STATE_UPLOADING: {\n        if (!supportsUploadProgress) {\n          return true\n        }\n        return false\n      }\n      default:\n        return false\n    }\n  }\n\n  function getIsHidden () {\n    if (recoveredState) {\n      return false\n    }\n\n    switch (uploadState) {\n      case STATE_WAITING:\n        return hideUploadButton || newFiles === 0\n      case STATE_COMPLETE:\n        return hideAfterFinish\n      default:\n        return false\n    }\n  }\n\n  const progressValue = getProgressValue()\n\n  const isHidden = getIsHidden()\n\n  const width = progressValue ?? 100\n\n  const showUploadBtn = !error\n    && newFiles\n    && !isUploadInProgress\n    && !isAllPaused\n    && allowNewUpload\n    && !hideUploadButton\n\n  const showCancelBtn = !hideCancelButton\n    && uploadState !== STATE_WAITING\n    && uploadState !== STATE_COMPLETE\n\n  const showPauseResumeBtn = resumableUploads\n    && !hidePauseResumeButton\n    && uploadState === STATE_UPLOADING\n\n  const showRetryBtn = error && !isAllComplete && !hideRetryButton\n\n  const showDoneBtn = doneButtonHandler && uploadState === STATE_COMPLETE\n\n  const progressClassNames = classNames('uppy-StatusBar-progress', {\n    'is-indeterminate': getIsIndeterminate(),\n  })\n\n  const statusBarClassNames = classNames(\n    'uppy-StatusBar',\n    `is-${uploadState}`,\n    { 'has-ghosts': isSomeGhost },\n  )\n\n  return (\n    <div className={statusBarClassNames} aria-hidden={isHidden}>\n      <div\n        className={progressClassNames}\n        style={{ width: `${width}%` }}\n        role=\"progressbar\"\n        aria-label={`${width}%`}\n        aria-valuetext={`${width}%`}\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        aria-valuenow={progressValue}\n      />\n\n      {(() => {\n        switch (uploadState) {\n          case STATE_PREPROCESSING:\n          case STATE_POSTPROCESSING:\n            return <ProgressBarProcessing progress={calculateProcessingProgress(files)} />\n          case STATE_COMPLETE:\n            return <ProgressBarComplete i18n={i18n} />\n          case STATE_ERROR:\n            return (\n              <ProgressBarError\n                error={error}\n                i18n={i18n}\n                numUploads={numUploads}\n                complete={complete}\n              />\n            )\n          case STATE_UPLOADING:\n            return (\n              <ProgressBarUploading\n                i18n={i18n}\n                supportsUploadProgress={supportsUploadProgress}\n                totalProgress={totalProgress}\n                showProgressDetails={showProgressDetails}\n                isUploadStarted={isUploadStarted}\n                isAllComplete={isAllComplete}\n                isAllPaused={isAllPaused}\n                newFiles={newFiles}\n                numUploads={numUploads}\n                complete={complete}\n                totalUploadedSize={totalUploadedSize}\n                totalSize={totalSize}\n                totalETA={totalETA}\n                startUpload={startUpload}\n              />\n            )\n          default:\n            return null\n        }\n      })()}\n\n      <div className=\"uppy-StatusBar-actions\">\n        {recoveredState || showUploadBtn ? (\n          <UploadBtn\n            newFiles={newFiles}\n            isUploadStarted={isUploadStarted}\n            recoveredState={recoveredState}\n            i18n={i18n}\n            isSomeGhost={isSomeGhost}\n            startUpload={startUpload}\n            uploadState={uploadState}\n          />\n        ) : null}\n\n        {showRetryBtn ? <RetryBtn i18n={i18n} uppy={uppy} /> : null}\n\n        {showPauseResumeBtn ? (\n          <PauseResumeButton\n            isAllPaused={isAllPaused}\n            i18n={i18n}\n            isAllComplete={isAllComplete}\n            resumableUploads={resumableUploads}\n            uppy={uppy}\n          />\n        ) : null}\n\n        {showCancelBtn ? <CancelBtn i18n={i18n} uppy={uppy} /> : null}\n\n        {showDoneBtn ? (\n          <DoneBtn i18n={i18n} doneButtonHandler={doneButtonHandler} />\n        ) : null}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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"}