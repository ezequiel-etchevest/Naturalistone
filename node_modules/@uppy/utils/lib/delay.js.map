{"version":3,"names":["createAbortError","delay","ms","opts","Promise","resolve","reject","_opts$signal","_opts$signal2","signal","aborted","timeout","setTimeout","cleanup","onabort","clearTimeout","addEventListener","_opts$signal3","removeEventListener","undefined"],"sources":["delay.js"],"sourcesContent":["import { createAbortError } from './AbortController.js'\n\n/**\n * Return a Promise that resolves after `ms` milliseconds.\n *\n * @param {number} ms - Number of milliseconds to wait.\n * @param {{ signal?: AbortSignal }} [opts] - An abort signal that can be used to cancel the delay early.\n * @returns {Promise<void>} A Promise that resolves after the given amount of `ms`.\n */\nexport default function delay (ms, opts) {\n  return new Promise((resolve, reject) => {\n    if (opts?.signal?.aborted) {\n      return reject(createAbortError())\n    }\n\n    const timeout = setTimeout(() => {\n      cleanup() // eslint-disable-line no-use-before-define\n      resolve()\n    }, ms)\n\n    function onabort () {\n      clearTimeout(timeout)\n      cleanup() // eslint-disable-line no-use-before-define\n      reject(createAbortError())\n    }\n    opts?.signal?.addEventListener('abort', onabort)\n    function cleanup () {\n      opts?.signal?.removeEventListener('abort', onabort)\n    }\n    return undefined\n  })\n}\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,sBAAsB;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,KAAKA,CAAEC,EAAE,EAAEC,IAAI,EAAE;EACvC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IAAA,IAAAC,YAAA,EAAAC,aAAA;IACtC,IAAIL,IAAI,aAAAI,YAAA,GAAJJ,IAAI,CAAEM,MAAM,aAAZF,YAAA,CAAcG,OAAO,EAAE;MACzB,OAAOJ,MAAM,CAACN,gBAAgB,CAAC,CAAC,CAAC;IACnC;IAEA,MAAMW,OAAO,GAAGC,UAAU,CAAC,MAAM;MAC/BC,OAAO,CAAC,CAAC,EAAC;MACVR,OAAO,CAAC,CAAC;IACX,CAAC,EAAEH,EAAE,CAAC;IAEN,SAASY,OAAOA,CAAA,EAAI;MAClBC,YAAY,CAACJ,OAAO,CAAC;MACrBE,OAAO,CAAC,CAAC,EAAC;MACVP,MAAM,CAACN,gBAAgB,CAAC,CAAC,CAAC;IAC5B;IACAG,IAAI,aAAAK,aAAA,GAAJL,IAAI,CAAEM,MAAM,qBAAZD,aAAA,CAAcQ,gBAAgB,CAAC,OAAO,EAAEF,OAAO,CAAC;IAChD,SAASD,OAAOA,CAAA,EAAI;MAAA,IAAAI,aAAA;MAClBd,IAAI,aAAAc,aAAA,GAAJd,IAAI,CAAEM,MAAM,qBAAZQ,aAAA,CAAcC,mBAAmB,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACrD;IACA,OAAOK,SAAS;EAClB,CAAC,CAAC;AACJ"}